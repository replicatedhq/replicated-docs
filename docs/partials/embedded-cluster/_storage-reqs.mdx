Embedded Cluster stores data in the following primary locations, all of which must be writable:

The default location of the data directory can be modified by the user at install time by passing the `--data-dir` flag to the `install` command.
This directory cannot be changed after the cluster is installed.

For example:

```bash
sudo ./APP_SLUG install --data-dir /data/embedded-cluster --license license.yaml --airgap-bundle APP_SLUG.airgap
```
Where `APP_SLUG` is the unique application slug.

:::note
Replicated does not support using symlinked directories for these locations. Instead, Replicated recommends bind mounts, which provide greater consistency across different applications, preserve the original directory permissions and ownership, and have less overhead compared to symlinks. For more information, see [Relocating data directories with bind mounts](https://community.replicated.com/t/relocating-data-directories-with-bind-mounts/1435) in Replicated Community.
:::

#### `/var/lib/embedded-cluster`

- Used to store your installer
- Includes:
  * Temporary files
  * Supporting binaries (for example, kubectl and Replicatedâ€™s preflight and support-bundle plugins)
- Should be large enough to fit at least 2 installer binaries

#### `/var/lib/embedded-cluster/k0s`

- Where the Kubernetes cluster runs
- Includes:
  * All Kubernetes components and binaries
  * Pod log files
  * Images currently in use by containerd
- Storage requirements:
  * The total space should be sufficient to hold the following while remaining below 85% utilization:
    * All Pod logs
    * Two copies of infrastructure images included in k0s
    * All Pod images for your application
  * Kubernetes will initiate garbage collection of images when utilization reaches 85%
- Calculation example:
  If the sum of required storage for logs, images, and components is X GB, the total allocated space should be at least X / 0.85 GB to ensure it remains below 85% utilization.

#### `/var/lib/embedded-cluster/openebs-local`

- Where PVC data is stored
- Needs enough storage to support all volumes used in your application
- For airgap installs:
  * Registry uses a volume
  * Requires space for two copies of your images (for registry)
  * Additional space needed for other application volume requirements
  * If high availability is enabled, all controller nodes will have the same requirements because data will be replicated to all controller nodes.

#### `/tmp`
- Temporary space during installation

#### Additional Directories and Files

In addition to the primary directories above, Embedded Cluster creates directories and files in the following locations:

- /etc/cni
- /etc/k0s
- /opt/cni
- /opt/containerd
- /run/calico
- /run/containerd
- /run/k0s
- /sys/fs/cgroup/kubepods
- /sys/fs/cgroup/system.slice/containerd.service
- /sys/fs/cgroup/system.slice/containerd.service
- /sys/fs/cgroup/system.slice/k0scontroller.service
- /sys/fs/cgroup/system.slice/k0scontroller.service
- /usr/libexec/k0s
- /var/lib/calico
- /var/lib/cni
- /var/lib/containers
- /var/lib/kubelet
- /var/log/calico
- /var/log/containers
- /var/log/embedded-cluster
- /var/log/pods
- /usr/local/bin/k0s
