import ConfigValuesExample from "../partials/configValues/_configValuesExample.mdx"
import ConfigValuesRequirements from "../partials/configValues/_requirements.mdx"

# ConfigValues

This topic describes the Replicated KOTS ConfigValues resource. ConfigValues is used to set application configuration values during automated or headless installations from the command line.

For information about the Replicated KOTS Config custom resource, which is used to customize the application-specific configuration fields on the Admin Console config screen, see [Config](custom-resource-config).

## Overview

The ConfigValues resource lists the values and defaults for each application configuration item defined in the Replicated KOTS [Config](custom-resource-config) resource in the release.

In automated or headless installations, end users provide a ConfigValues resource with the install command to set the application configuration values from the command line rather than through the Admin Console UI. For more information about performing headless installations with Replicated Embedded Cluster, see [Automate Embedded Cluster Installations](/enterprise/installing-embedded-automation). For information about performing headless installations with KOTS in an existing cluster, see [Install with the KOTS CLI](/enterprise/installing-existing-cluster-automation).

Additionally, for each installation, the Admin Console automatically generates a ConfigValues resource and makes it available for download in the Admin Console **View files** tab.

The following image shows how application configuration items defined a Config resource map to a ConfigValues resource:

![Config fields mapped from Config resource to ConfigValues resource](/images/configvalues-diagram.png)

[View a larger version of this image](/images/configvalues-diagram.png)

As shown in the image above, the ConfigValues resource `values` key lists each item from the Config resource by its `name`. For each item, the ConfigValues resource lists the user-supplied value as well as the default that was defined in the Config resource (if applicable).

## Example

<ConfigValuesExample/>

## Requirements

<ConfigValuesRequirements/>

## Limitation

Replicated template functions are not supported in the ConfigValues resource. To set an application configuration item to a value rendered by a template function, you can use a template function in the `default` or `value` property for the item in the [Config](custom-resource-config) resource.

For more information about working with Replicated template functions, see [About Template Functions](/reference/template-functions-about).

## Spec

### values.[item_name].default

The item's default value, as defined in the [Config](custom-resource-config) custom resource in the release.

#### Example

```yaml
apiVersion: kots.io/v1beta1
kind: ConfigValues
spec:
  values:
    certificate_source:
      default: generate_internal
    deploy_postgres:
      default: "1"
      value: "0"
    service_type:
      default: cluster_ip
      value: node_port
    node_port_port:
      default: "443"
      value: "3000"     
```

### values.[item_name].value

The user-supplied value for the application configuration item.

#### Example

```yaml
apiVersion: kots.io/v1beta1
kind: ConfigValues
spec:
  values:
    slack_clientid:
      value: T057KR02S
    slackernews_domain:
      value: hello.ingress.replicatedcluster.com
    slackernews_admin_user_emails:
      value: mandy@nitflex.com, jeff@nitflex.com, anil@nitflex.com  
    service_type:
      value: node_port
    node_port_port:
      value: "443"  
```

:::note
In the ConfigValues resource that is automatically generated by the Admin Console as part of installation, the `value` property might also be set to one of the following:
* A value rendered by a Replicated template function. For example, a [`hidden`](/reference/custom-resource-config#hidden) item defined in the Config resource could use the Replicated [RandomString](/reference/template-functions-static-context#randomstring) template function to set the value with `value: repl{{ RandomString 40}}`. In this case, the value for the item in the ConfigValues would be generated by the template function and not user-supplied. For more information about using Replicated template functions, see [About Template Functions](/reference/template-functions-about).
* An encrypted empty string. For any `password` configuration items without a user-supplied value, the Admin Console sets the value to an empty string. In the ConfigValues generated for the installation, this empty string is automatically encrypted.
* An empty mapping (`{}`). For configuration items without a user-supplied `value` or a `default` set, the value is set to `{}`.
:::

### values.[item_name].valuePlainText {#valueplaintext}

A plain text value. For any configuration items of type [`password`](/reference/custom-resource-config#password), the password must be provided in plain text in a `valuePlainText` property rather than in the `value` property.

During installation, the Admin Console encrypts the values set in `valuePlainText`. In the ConfigValues resource that is automatically generated as part of installation, these encrypted values are saved in `value` properties. The image below shows how a `valuePlainText` value is encrypted and added to a `value` property during installation:

![valuesPlainText field in ConfigValues](/images/configvalues-plaintext.png)

[View a larger version of this image](/images/configvalues-plaintext.png)

#### Example

```yaml
apiVersion: kots.io/v1beta1
kind: ConfigValues
spec:
  values:
    slack_bot_token:
      valuePlainText: examplebottoken
    slack_clientsecret:
      valuePlainText: exampleclientsecret
    slack_user_token:
      valuePlainText: exampleusertoken
```