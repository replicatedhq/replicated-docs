import UpdateAirGapAdm from "../partials/embedded-cluster/_update-air-gap-admin-console.mdx"
import UpdateAirGapCli from "../partials/embedded-cluster/_update-air-gap-cli.mdx"
import UpdateAirGapOverview from "../partials/embedded-cluster/_update-air-gap-overview.mdx"
import DoNotDowngrade from "../partials/embedded-cluster/_warning-do-not-downgrade.mdx"
import Overview from "../partials/embedded-cluster/_update-overview.mdx"

# Performing Updates in Embedded Clusters (Beta)

This topic describes how to perform updates for [Replicated Embedded Cluster](/vendor/embedded-overview) installations.

:::note
Embedded cluster is in beta. If you are instead looking for information about Replicated kURL, see [Performing Updates in kURL Clusters](updating-kurl).
:::

## Overview

<Overview/>

## Update in Online Clusters

<DoNotDowngrade/>

To perform an update with Embedded Cluster:

1. In the Admin Console, go to the **Version history** tab.

   All versions available for upgrade are listed in the **Available Updates** section:

   ![Version history page](/images/ec-upgrade-version-history.png)

   [View a larger version of this image](/images/ec-upgrade-version-history.png)

1. Click **Deploy** next to the target version.

1. On the **Config** screen of the upgrade wizard, make any necessary changes to the configuration for the application. Click **Next**.

    ![Config screen in the upgrade wizard](/images/ec-upgrade-wizard-config.png)

    [View a larger version of this image](/images/ec-upgrade-wizard-config.png)

    :::note
    Any changes made on the **Config** screen of the upgrade wizard are not set until the new version is deployed.
    :::

1. On the **Preflight** screen, view the results of the preflight checks.

   ![Preflight screen in the upgrade wizard](/images/ec-upgrade-wizard-preflights.png)

   [View a larger version of this image](/images/ec-upgrade-wizard-preflights.png)

1. On the **Confirm** screen, click **Deploy**.

   ![Confirmation screen in the upgrade wizard](/images/ec-upgrade-wizard-confirm.png)

   [View a larger version of this image](/images/ec-upgrade-wizard-confirm.png)

   During updates, the Admin Console is unavailable. A modal is displayed with a message that the update is in progress.
   
   :::note
   KOTS can experience downtime during an update, such as in single-node installations. If downtime occurs, refreshing the page results in a connection error. Users can refresh the page again after the update is complete to access the Admin Console.
   :::

## Update in Air Gap Clusters (Alpha) 

:::important
Embedded Cluster installations in air gap environments in an Alpha feature. This feature is subject to change, including breaking changes. To get access to this feature, reach out to Alex Parker at [alexp@replicated.com](mailto:alexp@replicated.com).
:::

<DoNotDowngrade/>

<UpdateAirGapOverview/>

### Upload the New Version From the Command Line

<UpdateAirGapCli/>

### Upload the New Version From the Admin Console

To perform an update with Embedded Cluster in an air gap environment:

<UpdateAirGapAdm/>