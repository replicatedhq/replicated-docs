# Create Event Notification Subscriptions (Beta)

:::note
Event Notifications is in Beta. Features and functionality are subject to change as we continue to iterate this functionality towards General Availability.
:::

This topic describes how to create event notification subscriptions in the Replicated Vendor Portal.

## Overview

You can create notification subscriptions from scratch to receive alerts when specific events occur. Each subscription can be customized with filters to target exactly the events that matter to your workflow, and can be delivered via email or webhook.

## Prerequisites

Before creating event notification subscriptions, ensure you have:

- **RBAC Permissions**: Appropriate permissions to create notifications. See [RBAC Permissions](event-notifications#prerequisites) in _Event Notifications (Beta)_.
- **Email or Webhook URL**: A destination for your notifications (your email address or a webhook URL for integrations like Slack).

For webhook delivery:
- A webhook endpoint URL that can receive POST requests
- (Optional) A signing secret for HMAC signature verification

## Create a Notification from Scratch

To create a new notification subscription:

1. Navigate to **Notifications** in the Vendor Portal

2. Click **"New Notification"** or **"Create Notification"**

3. **Select an event type** from the dropdown:
   - Events are organized by category (Instance, Release, Customer, Channel, Support)
   - Use the search box to quickly find event types
   - Each event displays its description to help you choose

   <!-- TODO: Add screenshot of event type selection dropdown -->

4. **Configure filters** for the event type:
   - Available filters depend on the event type selected
   - Most filters support dropdown selection from your existing resources
   - Some filters support multiselect (e.g., License Type, Customer)
   - Text filters allow pattern matching (e.g., Entitlement Filter)
   - Leave filters empty to match all values

   **Common Filters:**
   - **Application**: Filter by specific application
   - **Channel**: Filter by release channel (Stable, Beta, Unstable, etc.)
   - **Customer**: Filter by specific customer(s)
   - **License Type**: Filter by license type (Trial, Paid, Community, Development)
   - **Instance**: Filter by specific instance (for instance events)
   - **Number of Versions Behind**: Threshold for version behind alerts
   - **Days Until Expiry**: Threshold for license expiration warnings

   <!-- TODO: Add screenshot of filter configuration -->

5. **Choose your notification delivery method**:

   ### Email Delivery
   - Enter an email address
   - Email addresses other than your Vendor Portal account email require verification (see [Email Verification](#email-verification) below)

   ### Webhook Delivery
   - Enter a webhook URL
   - (Optional) Enter a signing secret for HMAC signature verification
   - See [Event Notification Webhooks (Beta)](event-notifications-webhooks) for technical details

   <!-- TODO: Add screenshot of delivery method selection -->

6. (Optional) **Name your notification** for easy identification
   - Use descriptive names like "Trial License Expiration Alerts" or "Acme Corp Support Bundles"
   - Names help you quickly identify subscriptions in the list view

7. Click **"Create Notification"** to activate

Your notification subscription is now active and will begin matching events based on your configured filters.

## Email Verification {#email-verification}

When sending to an email address other than the one associated with your Vendor Portal user account, you must first validate that email before notifications can be sent.

### Verification Process

1. After creating a notification with an unverified email address, a verification email will be sent to that address
2. The notification subscription will be created but remain inactive until verified
3. To complete verification, you have two options:

   **Option 1: Email Link**
   - Open the verification email
   - Click the validation link in the email
   - You must be logged into Vendor Portal in your browser to validate

   **Option 2: Verification Code**
   - Copy the verification code from the email
   - Navigate to **Notifications** in the Vendor Portal
   - Edit the notification subscription
   - Enter the verification code
   - Save the notification

4. Once verified, the notification subscription will become active and begin sending notifications

:::note
You must be logged into Vendor Portal to validate email addresses.
:::

## AI-Assisted Notification Builder (Optional)

Vendor Portal includes an optional AI-assisted notification builder to help you quickly set up subscriptions.

To use the AI builder:

1. Click **"Create with AI"** for guided notification setup
2. Describe in natural language what you want to be notified about
   - Example: "Notify me when trial customers upload support bundles"
   - Example: "Alert me when instances fall more than 3 versions behind on the Stable channel"
3. The AI will suggest the appropriate event type and filters based on your description
4. Review and adjust the AI's suggestions before creating
5. Proceed with the standard creation workflow

:::note
The AI builder has context of pre-defined event types and filters, but cannot create new event types or filters beyond what's available in the system.
:::

## Filter Logic

Understanding how filters work will help you create effective notification subscriptions.

### Basic Filter Behavior

- **No filters specified**: The notification will match **all events** for that event type
- **One or more filters specified**: The event must match **all specified filters** to trigger the notification (AND logic)
- **Multi-select filters**: If a filter contains multiple selected values, the event must match **any** of the selected values within that filter to trigger the notification (OR logic within the filter)

### Examples

**Example 1: Single Filter**
- Event Type: Customer Created
- Filter: License Type = Trial
- **Result**: Notification triggers for all trial customer creations

**Example 2: Multiple Filters (AND logic)**
- Event Type: Instance Upgraded
- Filter: Application = "MyApp"
- Filter: Channel = "Stable"
- **Result**: Notification triggers only when instances of MyApp on the Stable channel are upgraded

**Example 3: Multi-Select Filter (OR logic within filter)**
- Event Type: Customer License Expiring
- Filter: Application = "MyApp"
- Filter: License Type = Trial, Paid (both selected)
- **Result**: Notification triggers when either trial OR paid customer licenses for MyApp are expiring

<!-- TODO: Add screenshot showing multi-select filter UI -->

## Testing Your Subscription

After creating a notification subscription, verify that it works as expected:

1. Trigger the event condition in a development or test environment
   - For example, create a test customer or upload a support bundle
2. Check your email inbox or webhook endpoint for the notification
3. Review the notification history in the Vendor Portal:
   - Navigate to **Notifications** > **History**
   - Verify the event was captured and delivery was successful
4. If notifications aren't arriving:
   - Verify email address is validated (check for verification email)
   - Check that filters aren't too restrictive
   - Review notification history for delivery errors
   - For webhooks, see [Debugging Webhooks](event-notifications-webhooks#debugging) in _Event Notification Webhooks (Beta)_

## Troubleshooting

### Notification Not Triggering

If your notification subscription isn't triggering when expected:

- **Check filters**: Ensure your filters aren't too restrictive and that the event meets all filter conditions
- **Verify subscription is active**: Inactive or disabled subscriptions won't trigger
- **Check email verification**: Unverified email addresses will block notifications from being sent
- **Review notification history**: Look for attempted deliveries and error messages

### Email Not Received

If you created a notification but aren't receiving emails:

- **Check spam folder**: Notification emails may be filtered by email clients
- **Verify email address**: Ensure the email address is correct and has been verified
- **Check notification history**: Verify the notification was triggered and email delivery was attempted
- **Check your RBAC permissions**: Ensure you have `team/notifications/events/read` permission to view history

### Webhook Not Receiving Notifications

If your webhook endpoint isn't receiving notifications:

- **Verify webhook URL**: Ensure the URL is correct and publicly accessible
- **Check webhook endpoint logs**: Verify your endpoint is responding with 2xx status codes
- **Test webhook manually**: Use a tool like `curl` to test your endpoint
- **Review notification history**: Check for delivery errors and retry attempts
- See [Event Notification Webhooks (Beta)](event-notifications-webhooks) for detailed webhook troubleshooting

## Next Steps

- [Manage Event Notification Subscriptions (Beta)](event-notifications-manage) - View, edit, and delete subscriptions
- [Event Notification Webhooks (Beta)](event-notifications-webhooks) - Configure webhooks for integrations like Slack
- [Event Notifications (Beta)](event-notifications) - Overview and available event types

## Related Topics

- [About Instance and Event Data](instance-insights-event-data) - How the Vendor Portal collects instance data
- [Custom RBAC Policies](team-management-rbac-configuring) - Configuring custom RBAC policies for notifications
