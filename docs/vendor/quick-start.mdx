import DependencyYaml from "../partials/replicated-sdk/_dependency-yaml.mdx"
import HelmPackage from "../partials/helm/_helm-package.mdx"
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import HelmChartCr from "../partials/getting-started/_slackernews-chart.mdx"
import KotsCr from "../partials/getting-started/_slackernews-repl-app.mdx"
import K8sCr from "../partials/getting-started/_slackernews-k8s-app.mdx"
import EcCr from "../partials/getting-started/_slackernews-embedded-cluster.mdx"
import ConfigCr from "../partials/getting-started/_slackernews-config.mdx"
import Requirements from "../partials/embedded-cluster/_requirements.mdx"

# Replicated Quick Start

This topic provides a quick start workflow to help new users learn about the Replicated Platform. Complete this quick start before you onboard your application to the platform.

## Introduction

This quick start shows how to create, install, and update releases for a sample Helm chart in the Replicated Platform. You will repeat these same basic steps to create and test releases throughout the onboarding process to integrate Replicated features with your own application.

The goals of this quick start are to introduce new Replicated users to the following common tasks for the purpose of preparing to onboard to the Replicated Platform:

* Working with _applications_, _channels_, _releases_, and _customers_ in the Replicated Vendor Portal

* Working with the Replicated CLI

* Installing and updating applications on a VM with Replicated Embedded Cluster

## Set Up Your Environment

To complete this quick start, you need access to a VM that meets the requirements for Embedded Cluster:

* **Option 1: Use Compatibility Matrix.** To use Replicated Compatibility Matrix to create a VM, do the following before proceeding:
   
   * Request Compatibility Matrix credits. You can request credits by creating a Vendor Portal account and then going to [**Compatibility Matrix > Request more credits**](https://vendor.replicated.com/compatibility-matrix) in the Vendor Portal. For more information about creating an account, see [Create a Vendor Account](vendor-portal-creating-account). For more information about Compatibility Matrix credits, see [Billing and Credits](/vendor/testing-about#billing-and-credits).
   
   * Ensure that you have an SSH key in your GitHub account. Then, add your GitHub username to your Vendor Portal [**Account Settings**](https://vendor.replicated.com/account-settings). This will provide SSH access to VMs that you create with Compatibility Matrix. For more information, see [Set Up SSH Access](/vendor/testing-vm-create#set-up-ssh-access) in _Create VMs_.

   After you complete the prerequisites above, continue to the [Quick Start](#quick-start). You will create the VM with Compatibility Matrix as part of the tutorial.

* **Option 2: Bring your own VM.** Your VM must meet these requirements:

   * Firewalls must allow HTTP and HTTPS traffic.

   <Requirements/>

## Quick Start

1. If you have not done so already, create an account in the Vendor Portal. You can either create a new team or join an existing team. For more information, see [Create a Vendor Account](vendor-portal-creating-account).

1. Create an application using the Replicated CLI:

   1. On your local machine, install the Replicated CLI:

      * MacOS

        ```bash
        brew install replicatedhq/replicated/cli
        ```
      * Linux / Windows Subsystem for Linux (WSL)

        ```bash
        version=$(curl -s https://api.github.com/repos/replicatedhq/replicated/releases/latest \
          | grep -m1 -Po '"tag_name":\s*"v\K[^"]+')
        curl -Ls \
          "https://github.com/replicatedhq/replicated/releases/download/v${version}/replicated_${version}_linux_amd64.tar.gz" \
          -o replicated.tar.gz
        tar xf replicated.tar.gz replicated && rm replicated.tar.gz
        mv replicated /usr/local/bin/replicated
        ``` 
      For more information and additional installation options, see [Install the Replicated CLI](/reference/replicated-cli-installing).

   1. Authorize the Replicated CLI:

      ```bash
      replicated login
      ```
      In the browser window that opens, follow the prompt to log in to your Vendor Portal account and authorize the CLI.

   1. Create an application named `SlackerNews`:

      ```bash
      replicated app create SlackerNews
      ```

   1. Set the `REPLICATED_APP` environment variable to the application that you created:

      ```bash
      export REPLICATED_APP=APP_SLUG
      ```
      Where `APP_SLUG` is the unique application slug provided in the output of the `app create` command.

      Setting the `REPLICATED_APP` environment variable allows you to interact with the application using the Replicated CLI without needing to use the `--app` flag with every command.

1. Get the sample SlackerNews Helm chart:

   1. Run the following command to download version 0.4.14 of the SlackerNews Helm chart to a new `quick-start` directory: 

      ```
      curl -O --create-dirs --output-dir quick-start https://docs.replicated.com/slackernews-0.4.14.tar.gz
      ```
   
   1. Untar the chart:

      ```
      tar -xzf quick-start/slackernews-0.4.14.tar.gz -C quick-start/ && rm quick-start/slackernews-0.4.14.tar.gz
      ```

   1. Change to the `slackernews` chart directory:
      
      ```bash
      cd quick-start/chart/slackernews
      ```

   1. List the files in the `slackernews` directory to view the contents of the Helm chart:
      ```bash
      ls
      ```
      ```bash
      Chart.lock  Chart.yaml  NOTES.txt   README.md   templates   values.yaml
      ```

   1. In the SlackerNews Helm chart `Chart.yaml`, add the Replicated SDK as a dependency:

      <DependencyYaml/>

      The Replicated SDK is a Helm chart that provides access to Replicated features and can be installed as a small service alongside your application. For more information, see [About the Replicated SDK](/vendor/replicated-sdk-overview).

      **Example:**

      ```yaml
      # Chart.yaml
      apiVersion: v2
      name: slackernews
      version: 0.4.14
      icon: data:image/png;base64,iVBORw0KGgoAAAA... # slackernews base64 encoded icon
      # Replicated SDK subchart
      dependencies:
      - name: replicated
        repository: oci://registry.replicated.com/library
        version: 1.7.2
      ```

   1. Update dependencies and package the Helm chart to a `.tgz` chart archive:

      ```bash
      helm package -u .
      ```
      Where `-u` or `--dependency-update` is an option for the helm package command that updates chart dependencies before packaging. For more information, see [Helm Package](https://helm.sh/docs/helm/helm_package/) in the Helm documentation.

      The output of this command is a file named `slackernews-0.4.14.tgz`.

1. Add the `slackernews-0.4.14.tgz` chart archive to a release in the Replicated Platform:

   1. Change to the `quick-start` directory:

      ```bash
      cd ../..
      ```
   
   1. In the `quick-start` directory, create a directory named `manifests`:

      ```
      mkdir manifests
      ```
      You will add the files required to support installation with Embedded Cluster to this subdirectory.

   1. Move the `slackernews-0.4.14.tgz` chart archive that you created to `manifests`:

      ```
      mv chart/slackernews/slackernews-0.4.14.tgz manifests
      ```

   1. In `manifests`, create the following YAML files:
      ```
      cd manifests
      ```
      ```
      touch slackernews.yaml replicated-app.yaml k8s-app.yaml embedded-cluster.yaml config.yaml
      ```
      These manifests will be used by the Replicated Embedded Cluster installer to install SlackerNews.

   1. In each of the files that you created, paste the corresponding YAML provided in the tabs below:

      <Tabs>
      <TabItem value="helmchart" label="slackernews.yaml" default>
      <h5>Description</h5>
      <p>The KOTS HelmChart custom resource provides instructions to the installer about how to deploy the Helm chart. The <code>name</code> and <code>chartVersion</code> listed in the HelmChart custom resource must match the name and version of a Helm chart archive in the release. This HelmChart resource includes several `values` and conditional `optionalValues` that are supplied to `helm template` during deployment.</p>
      <h5>YAML</h5>
      <HelmChartCr/>
      </TabItem>
      <TabItem value="replicated-app" label="replicated-app.yaml">
      <h5>Description</h5>
      <p>The KOTS Application custom resource enables features in the Replicated Admin Console UI. The YAML below provides a name for the application to display in the Admin Console, adds custom <em>status informers</em> that are used to display the status of the deployment in the Admin Console dashboard, and adds a custom application icon.</p>
      <h5>YAML</h5>
      <KotsCr/>
      </TabItem>
      <TabItem value="k8s-app" label="k8s-app.yaml">
      <h5>Description</h5>
      <p>The Kubernetes SIG Application custom resource supports functionality such as including buttons and links on the Admin Console dashboard. The YAML below adds an <strong>Open SlackerNews</strong> button that opens the application.</p>
      <h5>YAML</h5>
      <K8sCr/>
      </TabItem>
      <TabItem value="ec" label="embedded-cluster.yaml">
      <h5>Description</h5>
      <p>To install your application with Embedded Cluster, an Embedded Cluster Config must be present in the release. At minimum, the Embedded Cluster Config sets the version of Embedded Cluster that will be installed. You can also define several characteristics about the cluster.</p>
      <h5>YAML</h5>
      <EcCr/>
      </TabItem>
      <TabItem value="config" label="config.yaml">
      <h5>Description</h5>
      <p>The Config custom resource defines the application configuration fields that are exposed to the user in the Admin Console. These fields can then be mapped to the `values.yaml` file for the Helm chart.</p>
      <h5>YAML</h5>
      <ConfigCr/>
      </TabItem>
      </Tabs>

   1. Lint the YAML files in the `manifests` directory:

      ```bash
      replicated release lint --yaml-dir .
      ```
      **Example output:**
      ```bash
      RULE                                TYPE   FILENAME             LINE   MESSAGE
      may-contain-secrets                 info   slackernews.yaml     142    It looks like there might be secrets in this file
      preflight-spec                      warn                               Missing preflight spec
      troubleshoot-spec                   warn                               Missing troubleshoot spec
      nonexistent-status-informer-object  warn   replicated-app.yaml  14     Status informer points to a nonexistent kubernetes object. If this is a Helm resource, this warning can be ignored.
      nonexistent-status-informer-object  warn   replicated-app.yaml  15     Status informer points to a nonexistent kubernetes object. If this is a Helm resource, this warning can be ignored.
      nonexistent-status-informer-object  warn   replicated-app.yaml  16     Status informer points to a nonexistent kubernetes object. If this is a Helm resource, this warning can be ignored.
      ```
      :::note
      You can ignore `info` or `warn` messages for the purpose of this quick start.
      :::

   1. From the `manifests` directory, create a release and promote it to the Unstable channel:

      ```bash
      replicated release create --yaml-dir . --promote Unstable
      ```
      **Example output**:
      ```bash
        • Reading manifests from . ✓
        • Creating Release ✓
          • SEQUENCE: 1
        • Promoting ✓
          • Channel 2kvjwEj4uBaCMoTigW5xty1iiw6 successfully set to release 1
      ```

1. Create a test customer so that you can install the release in your VM with Embedded Cluster:

   1. Log in to the [Vendor Portal](https://vendor.replicated.com).
   
   1. Under the application drop down, select the SlackerNews application that you created.

      <img alt="App drop down" src="/images/quick-start-app-dropdown-slackernews.png" width="250px"/>

      [View a larger version of this image](/images/quick-start-app-dropdown-slackernews.png)
   
   1. Click **Customers > Create customer**.

      The **Create a new customer** page opens:

      ![Customer a new customer page in the Vendor Portal](/images/create-customer.png)

      [View a larger version of this image](/images/create-customer.png)

   1. For **Customer name**, enter a name for the customer. For example, `Example Customer`.

   1. For **Channel**, select **Unstable**. This allows the customer to install releases promoted to the Unstable channel.

   1. For **Customer type**, select **Development**.

   1. For **Install types**, enable **Embedded Cluster (current generation product)**. Disable the other install type options.

   1. Click **Save Changes**.

1. If you brought your own VM, SSH onto your VM. Otherwise, follow these steps to create and SSH onto a VM with Compatibility Matrix:

   1. Create an Ubuntu VM that expires after two hours:

      ```bash
      replicated vm create --distribution ubuntu --version 24.04 --instance-type r1.small --disk 50 --ttl 2h
      ```
      **Example output:**
      ```bash
      ID        NAME             DISTRIBUTION  VERSION  STATUS  NETWORK   CREATED               EXPIRES   COST
      97940819  practical_black  ubuntu        24.04    queued  c726ffff  2025-08-20 14:32 MDT  -         $0.69
      ```

   1. After a few minutes, check the status of the VM to see when it is `running`:

      ```bash
      replicated vm ls
      ```
      **Example output:**
      ```bash
      ID        NAME             DISTRIBUTION  VERSION  STATUS   NETWORK   CREATED               EXPIRES                COST
      97940819  practical_black  ubuntu        24.04    running  c726ffff  2025-08-20 14:32 MDT  2025-08-20 16:33 MDT   $0.69
      ```

   1. Copy the `ID` from the output of the `replicated vm ls` command.
   
   1. Run the following command to use the Compatibility Matrix Forwarder to SSH onto the VM:

      ```bash
      ssh VM_ID@replicatedvm.com
      ```
      Where `VM_ID` is the ID that you copied.

      :::note
      If you are prompted to add the fingerprint for replicatedvm.com, type `yes` and press Enter.
      :::

   1. When prompted, provide the passphrase for the SSH key in your linked GitHub account. Comaptibility Matrix uses GitHub SSH to provide access to the VM. 

1. Install the application with Embedded Cluster:
     
    1. In the Vendor Portal, on the page for the customer that you created, click **Embedded Cluster install instructions**.

       ![Customer install instructions](/images/quick-start-slackernews-customer-install-instructions-button.png)

       [View a larger version of this image](/images/quick-start-slackernews-customer-install-instructions-button.png)

    1. On your VM, run the commands in the **Embedded cluster install instructions** dialog to download the latest release, extract the installation assets, and install SlackerNews.

       <img width="600px" src="/images/embedded-cluster-install-dialog-latest.png" alt="embedded cluster install instructions dialog"/>

       [View a larger version of this image](/images/embedded-cluster-install-dialog-latest.png)

   1. When prompted by the `install` command, set a password for accessing the Admin Console. Save the password in a secure location. You will use this password to log in to the Admin Console in a later step.

      The installation command takes a few minutes to complete.

      **Example output:**

      ```bash
      ? Set the Admin Console password (minimum 6 characters): ********
      ? Confirm the Admin Console password: ********

      ✔  Initialization complete
      ✔  Host preflights passed
      ✔  Node is ready
      ✔  Storage is ready
      ✔  Runtime Operator is ready
      ✔  Admin Console is ready
      ✔  Additional components are ready

      -----------------------------------------------------------------
      Visit the Admin Console to configure and install slackernews-gnu:

      http://10.0.0.11:30000
      -----------------------------------------------------------------
      ```

      At this point, the cluster is provisioned and the Admin Console is deployed, but the application is not yet installed.

   1. Do one of the following to access the Admin Console:
       * If your brought your own VM, go to the URL provided in the output of the install command.
       * If you created the VM with Compatibility Matrix:
         1. In the Vendor Portal, go to [**Compatibility Matrix**](https://vendor.replicated.com/compatibility-matrix/overview).
         1. Open the dot menu for your VM and click **Edit VM**.

            ![Edit VM in the dot menu](/images/compatibility-matrix-edit-vm.png)

            [View a larger version of this image](/images/compatibility-matrix-edit-vm.png)

         1. Under **Ingress & Ports**, for **Add DNS record**, click **Add** to create a DNS record using the default settings. This will provide a hostname where you can access the Admin Console.

         1. Add another DNS record with a **Target Port** of **443**. This will provide a hostname where you can access SlackerNews after it's installed.

             The following shows an example of both of these DNS records added to a VM:

             ![DNS record for a VM](/images/compatibility-matrix-dns-record.png)
             [View a larger version of this image](/images/compatibility-matrix-dns-record.png)

         1. Copy the URL for the DNS record with a target port of 443 and save it somewhere on your local machine. You will be asked to provide this hostname in the Admin Console as part of the installation process for SlackerNews.
         
         1. In a browser, navigate to the URL for the DNS record with a target port of 30000.

            The Admin Console opens.
   
   1. On the Admin Console landing page, click **Start**.

   1. On the **Secure the Admin Console** screen, review the instructions and click **Continue**. In your browser, follow the instructions that were provided on the **Secure the Admin Console** screen to bypass the warning.

   1. On the **Certificate type** screen, either select **Self-signed** to continue using the self-signed Admin Console certificate or click **Upload your own** to upload your own private key and certificacte.

       By default, a self-signed TLS certificate is used to secure communication between your browser and the Admin Console. You will see a warning in your browser every time you access the Admin Console unless you upload your own certificate.

   1. On the login page, enter the Admin Console password that you set and click **Log in**.

       ![Admin console login screen](/images/quick-start-slackernews-admin-console-login.png)

       [View a larger version of this image](/images/quick-start-slackernews-admin-console-login.png)

   1. On the **Configure the cluster** screen, you can view details about the VM where you installed, including its node role, status, CPU, and memory. Users can also optionally add additional nodes on this page before deploying the application. Click **Continue**. 

       ![Admin console login screen](/images/quick-start-slackernews-configure-the-cluster.png)

       [View a larger version of this image](/images/quick-start-slackernews-configure-the-cluster.png)

   1. On the **Configure SlackerNews** screen, complete the following fields:
   
       * For **Hostname**:
          * If you created the VM with Compatibility Matrix, enter the URL that you copied for the DNS record with a target port of 443. For example, `pensive-keldysh.ingress.replicatedcluster.com`.
          * If you are using your own VM, provide the IP address where you are currently accessing the Admin Console. You can copy the IP address from your browser's address bar. For example, `34.10.177.196`. Alternatively, if you know the hostname for your VM's IP address, you can provide that instead.
       * For **Application Access > Service Type**, select **NodePort**. Leave the port field blank to use the default port of 443. 
       * For **Postgresql**, ensure that **Deploy Postgresql Database** is enabled to deploy the built-in Postgresql database.

       Leave the other fields on the **Configure SlackerNews** screen empty. They are not applicable for this quick start.

       ![Configure slackernews screen](/images/quick-start-slackernews-configure-slackernews.png)

       [View a larger version of this image](/images/quick-start-slackernews-configure-slackernews.png)
   
   1. Click **Continue**.

       The Admin Console dashboard opens. The application status changes from Missing to Unavailable while the application is being deployed. You can click **Details** next to the status for more information about the status of specific application resources.

       After a few minutes, the status changes to Ready when the application is deployed:

       ![Slackernews with ready status on admin console dashboard](/images/quick-start-slackernews-adm-dashboard-ready.png)

       [View a larger version of this image](/images/quick-start-slackernews-adm-dashboard-ready.png)

   1. After a few minutes when the application status is Ready, click **Open SlackerNews** to view SlackerNews in a browser.

       ![Slackernews landing page](/images/slackernews-landing-page.png)

       [View a larger version of this image](/images/slackernews-landing-page.png)

1. View telemetry for the instance that you just deployed:

    1. Return to the Vendor Portal, select the SlackerNews application, and go to **Customers**. Under the name of the customer, confirm that you can see an active instance.

       This instance telemetry is automatically collected and sent back to the Vendor Portal by Embedded Cluster and the Replicated SDK. For more information, see [About Instance and Event Data](/vendor/instance-insights-event-data).

    1. (Optional) Under **Instance ID**, click on the ID to view additional insights including the versions of Kubernetes and the Replicated SDK running in the cluster where you installed the application. 

1. Create a new release that adds preflight checks to the application:

   1. In your local filesystem, go to the `quick-start/chart/slackernews` directory.

   1. Create a `preflights.yaml` file in the `templates` directory for the chart:

      ```
      touch templates/preflights.yaml
      ```

   1. In the `preflights.yaml` file, add the following YAML to create a Kubernetes Secret with a simple preflight spec: 

      ```yaml
      apiVersion: v1
      kind: Secret
      metadata:
        name: slackernews-preflight
        labels:
          troubleshoot.sh/kind: preflight
      stringData:
        preflight.yaml: |-
          apiVersion: troubleshoot.sh/v1beta2
          kind: Preflight
          metadata:
            name: slackernews-preflight
          spec:
            collectors:
              - clusterInfo: {}
              - clusterResources: {}
              - http:
                  collectorName: slack
                  get:
                    url: https://api.slack.com/methods/api.test
                    timeout: 20s
            analyzers:
              # verify that slack is accessible
              - textAnalyze:
                  checkName: Slack Accessible
                  fileName: slack.json
                  regex: '"status": 200,'
                  outcomes:
                    - pass:
                        when: "true"
                        message: "Can access the Slack API"
                    - fail:
                        when: "false"
                        message: "Cannot access the Slack API. Check that the server can reach the internet and check [status.slack.com](https://status.slack.com)."
      ```
      
      The YAML above defines a preflight check that confirms that an HTTP request to the Slack API at `https://api.slack.com/methods/api.test` made from the cluster returns a successful response of `"status": 200,`.

   1. In the `Chart.yaml` file, increment the version to 0.4.15:

      ```yaml
      # Chart.yaml
      version: 0.4.15
      ```

   1. Update dependencies and package the chart to a `.tgz` chart archive:

      ```bash
      helm package -u .
      ```

   1. Move the `slackernews-0.4.15.tgz` chart archive to the `manifests` directory:

      ```bash
      cd ../../manifests
      ```
      ```bash
      mv chart/slackernews/slackernews-0.4.15.tgz .
      ```

   1. In the `manifests` directory, open the HelmChart custom resource (`slackernews.yaml`) and update the `chartVersion` to match the new archive:

      ```yaml
      # slackernews.yaml HelmChart
      chartVersion: 0.4.15
      ```  

   1. Remove the unused chart archive for version 0.4.14 from the `manifests` directory:

      ```
      rm slackernews-0.4.14.tgz
      ```        

   1. From the `manifests` directory, lint the release manifests:

      ```bash
      replicated release lint --yaml-dir .
      ```

      :::note
      If you see a `helm-archive-missing` error, confirm that you have only one chart archive in `manifests` for version 0.4.15, and that the `chartVersion` in the HelmChart resource is also set to `0.4.15`. You can also try running `rm -rf .history` and then linting the files again.
      :::
   
   1. Create and promote a new release, setting the version label of the release to `0.0.2`:  

      ```bash
      replicated release create --yaml-dir . --promote Unstable --version 0.0.2
      ```
      **Example output**:
      ```bash
        • Reading manifests from . ✓
        • Creating Release ✓
          • SEQUENCE: 2
        • Promoting ✓
          • Channel 2kvjwEj4uBaCMoTigW5xty1iiw6 successfully set to release 2
      ```

1. On your VM, update the application instance to the new version that you just promoted:

   1. In the Admin Console, go to the **Version history** tab.

      The new version is displayed automatically.

      ![Admin console version history tab](/images/quick-start-slackernews-available-updates.png)

      [View a larger version of this image](/images/quick-start-slackernews-available-updates.png)

   1. Click **Deploy** next to the new version.

      The Embedded Cluster upgrade wizard opens. Follow the steps until you see the **Preflight checks** screen.

   1. On the **Preflight checks** screen, note that the "Slack Accessible" preflight check that you added was successful. Click **Next: Confirm and deploy**.   

      ![preflights screen in the upgrade wizard](/images/quick-start-slackernews-preflight.png)

      [View a larger version of this image](/images/quick-start-slackernews-preflight.png)  

   1. On the **Confirm and Deploy** page, click **Deploy**.

1. Clean up the installation:

    * If you created the VM with Compatibility Matrix, delete the VM:

       ```bash
       replicated vm rm VM_ID
       ```
       Where VM_ID is the ID of the VM. You can run `replicated vm ls` to get the ID.

    * If you brought your own VM, use Embedded Cluster to reset and reboot the VM to remove the installation:

       ```bash
       sudo ./APP_SLUG reset
       ```
       Where `APP_SLUG` is the unique slug for the application.

       :::note
       You can find the application slug by running replicated app ls on your local machine.  
       ::: 

## Next Steps

Congratulations! As part of this quick start, you:
* Added the Replicated SDK to a Helm chart
* Created a release with the Helm chart
* Installed the release on a VM with Embedded Cluster
* Viewed telemetry for the installed instance in the Vendor Portal
* Created a new release to add preflight checks to the application
* Updated the application to the new version using Embedded Cluster

Now that you are familiar with the workflow of creating, installing, and updating releases, you can begin onboarding your own application to the Replicated Platform.

To get started, see [Onboard to the Replicated Platform](replicated-onboarding).

## Related Topics

For more information about the Replicated Platform features mentioned in this quick start, see:

* [Embedded Cluster Overview](/vendor/embedded-overview)
* [About Compatibility Matrix](/vendor/testing-about)
* [About Preflight Checks and Support Bundles](/vendor/preflight-support-bundle-about)
* [About the Replicated SDK](/vendor/replicated-sdk-overview)
* [Manage Releases with the CLI](/vendor/releases-creating-cli)
* [Package a Helm Chart for a Release](/vendor/helm-install-release)