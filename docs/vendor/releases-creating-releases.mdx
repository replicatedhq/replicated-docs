import RequiredReleasesLimitations from "../partials/releases/_required-releases-limitations.mdx"
import RequiredReleasesDescription from "../partials/releases/_required-releases-description.mdx"

# Managing Releases with the Vendor Portal

This topic describes how to use the Replicated Vendor Portal to create and promote releases, edit releases, edit release properties, and archive releases.

For information about creating and managing releases with the CLI, see [Managing Releases with the CLI](/vendor/releases-creating-cli).

For information about creating and managing releases with the Vendor API v3, see the [releases](https://replicated-vendor-api.readme.io/reference/createrelease) and [channelReleases](https://replicated-vendor-api.readme.io/reference/channelreleaseairgapbundleurl) sections in the Vendor API v3 documentation.

## Create a Release

To create and promote a release in the Vendor Portal:

1. From the **Applications** dropdown list, select **Create an app** or select an existing application to update.

1. Click **Releases > Create release**. 

   ![Create Release](/images/release-create-new.png)

   [View a larger version of this image](/images/release-create-new.png)

1. Add your files to the release. You can do this by dragging and dropping files to the file directory in the YAML editor or clicking the plus icon to add a new, untitled YAML file.
   
1. For any Helm charts that you add to the release, in the **Select Installation Method** dialog, select the version of the HelmChart custom resource that KOTS will use to install the chart. kots.io/v1beta2 is recommended. For more information about the HelmChart custom resource, see [Configuring the HelmChart Custom Resource](helm-native-v2-using).

     <img src="/images/helm-select-install-method.png" alt="select installation method dialog" width="550px"/>

     [View a larger version of this image](/images/helm-select-install-method.png)

1. Click **Save release**. This saves a draft that you can continue to edit until you promote it.
   
1. Click **Promote**. In the **Promote Release** dialog, edit the fields:

   For more information about the requirements and limitations of each field, see <a href="releases-about#properties">Properties</a> in _About Channels and Releases_.

   <table>
    <tr>
      <th width="30%">Field</th>
      <th width="70%">Description</th>
    </tr>
    <tr>
      <td>Channel</td>
      <td>
        <p>Select the channel where you want to promote the release. If you are not sure which channel to use, use the default Unstable channel.</p>
      </td>
    </tr>
    <tr>
      <td>Version label</td>
      <td>
        <p>Enter a version label.</p>
        <p>If you have one or more Helm charts in your release, the Vendor Portal automatically populates this field. You can change the version label to any <code>version</code> specified in any of the <code>Chart.yaml</code> files included in the release.</p>
      </td>
    </tr>
    <tr>
      <td>Requirements</td>
      <td>
        Select the <strong>Prevent this release from being skipped during upgrades</strong> to mark the release as required for KOTS installations. This option does not apply to installations with Helm.
      </td>
    </tr>
    <tr>
      <td>Release notes</td>
      <td>Add release notes. The release notes support markdown and are shown to your customer.</td>
    </tr>
   </table>

1. Click **Promote**.

   The release appears in an **Active** state on the Releases page.

## Edit a Draft Release

To edit a draft release:

1. From the **Applications** dropdown list, select an existing application to update.
1. On the **Releases** page, find the draft release you want to edit and click **Edit YAML**.

   <img src="/images/releases-edit-draft.png" alt="Edit YAML button for a draft release in the Vendor Portal" width="400"/>

   [View a larger image](/images/releases-edit-draft.png)

1. Click **Save** to save your updated draft.
1. (Optional) Click **Promote**.
  
## Edit Release Properties

You can edit the properties of a release at any time. For more information about release properties, see [Properties](releases-about#properties) in _About Channels and Releases_.

To edit release properties:

1. Go to **Channels**.
1. In the channel where the release was promoted, click **Release History**.
1. For the release sequence that you want to edit, open the dot menu and click **Edit release**.
1. Edit the properties as needed.
    <img src="/images/release-properties.png" alt="Release Properties dialog in the Vendor Portal" width="300"/>
    
    [View a larger image](/images/release-properties.png)
1. Click **Update Release**.

## Archive a Release

You can archive releases to remove them from view on the **Releases** page. Archiving a release that has been promoted does _not_ remove the release from the channel's **Release History** page or prevent KOTS from downloading the archived release.

To archive one or more releases:

1. From the **Releases** page, click the trash can icon in the upper right corner.
1. Select one or more releases.
1. Click **Archive Releases**.
1. Confirm the archive action when prompted.

## Demote a Release

A channel release can be demoted from a channel. When a channel release is demoted, the release is no longer available for download, but is not withdrawn from environments where it was already downloaded or installed. For more information, see [Demotion](/vendor/releases-about#demotion) in _About Channels and Releases_.

For information about demoting and un-demoting releases with the Replicated CLI, see [channel demote](/reference/replicated-cli-channel-demote) and [channel un-demote](/reference/replicated-cli-channel-un-demote).

To demote a release in the Vendor Portal:

1. Go to **Channels**.
1. In the channel where the release was promoted, click **Release History**.
1. For the release sequence that you want to demote, open the dot menu and select **Demote Release**.

   ![Release history page](/images/channels-release-history.png)
   [View a larger version of this image](/images/channels-release-history.png)

   After the release is demoted, the given release sequence is greyed out and a **Demoted** label is displayed next to the release on the **Release History** page.   